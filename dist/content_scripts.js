(()=>{"use strict";const e=(e={},a={payload:Number})=>{if(e){const t=e;t.playbackRate=a.payload,t.dataset.CustomPlaybackRate=e.playbackRate}},a=(e={},a={payload:Number})=>{if(e){const t=document.querySelector("[data--custom-playback-rate]")||document.querySelector("video");t.playbackRate=a.payload,t.dataset.CustomPlaybackRate=e.playbackRate}},t=(e={payload:Number},a={})=>{if(console.log({request:e,videoElement:a}),void 0===e.payload||!a)return!0;const t=a.playbackRate,o=Number(e.payload);if(t!==o){const e=a;return e.playbackRate=o,e.dataset.CustomPlaybackRate=a.playbackRate,!1}return!0},o=(n={},s={})=>{if("VIDEO"===n.nodeName||"AUDIO"===n.nodeName)((o={},n=!1)=>{let s=o.querySelector("video");if(!s)return!1;const c={request:{payload:s.playbackRate}};n?a(s,c.request):e(s,c.request),console.log("adding video listeners..."),chrome.runtime.onMessage.addListener(((o,n,c)=>{if(console.log({request:o,sender:n,sendResponse:c}),"changePlaybackSpeed"===o.message||"getPlayBackSpeedOnPageLoad"===o.message){if("www.netflix.com"===document.location.hostname&&"getPlayBackSpeedOnPageLoad"===o.message){console.count("location and message");const e=setTimeout((()=>{const a=setInterval((()=>{s=document.querySelector("video"),s&&t(o,s)&&clearInterval(a)}),500);clearTimeout(e)}),500)}else if("getPlayBackSpeedOnPageLoad"===o.message){const e=setTimeout((()=>{const a=setInterval((()=>{t(o,s)&&clearInterval(a)}),500);clearTimeout(e)}),500)}return"changePlaybackSpeed"===o.message&&"www.netflix.com"===document.location.hostname?a(s,o):"changePlaybackSpeed"===o.message&&e(s,o),c({message:"success",payload:s.playbackRate}),!0}return!0})),console.log("found video and sending message..."),((e={})=>{chrome.runtime.sendMessage({message:"foundVideo",payload:e.playbackRate},(a=>{const{lastError:t=""}=chrome.runtime;if(t)console.log(t);else if("foundVideoSuccess"===a?.message&&null!==a.payload){const t=e;t.playbackRate=a.payload,t.dataset.CustomPlaybackRate=t.playbackRate}}))})(s)})(s);else if(void 0!==n.children)for(let e=0;e<n.children.length;e+=1){const a=n.children[e];o(a,a.parentNode||s)}},n=e=>{new MutationObserver((e=>{e.forEach((e=>{Array.from(e.addedNodes).filter((e=>"VIDEO"===e.nodeName||"IFRAME"===e.nodeName)).forEach((a=>{o(a,a.parentNode??e.target)}))}))})).observe(e,{childList:!0,subtree:!0})};!async function(){!await(async()=>{console.log("checking url...");const e=new RegExp("netflix","g");return!(!e.test(document.location.orgin)&&!e.test(document.URL))})()&&window.document&&(console.log("Running Mutation Observer"),(()=>{const e=(()=>{const e=document.getElementsByTagName("iframe");return Array.from(e).filter((e=>e.contentDocument)).map((e=>e.contentDocument))})();return Array.from([document,...e])})().forEach(n))}()})();